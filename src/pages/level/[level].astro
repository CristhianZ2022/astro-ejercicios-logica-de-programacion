---
export const prerender = false;

import Layout from "@layouts/Layout.astro";
import { ejercicios } from "../../lib/data.js";
import CodeDisplay from "@components/CodeDisplay";

const { level } = Astro.params;
const ejerciciosDelNivel = ejercicios.filter((e) => e.nivel === Number(level));
---

<Layout title={`Nivel ${level}`}>
  <div class="min-h-screen bg-black text-white">
    <header
      class="text-center py-20 bg-linear-to-b from-purple-900 via-black to-black"
    >
      <h1 class="text-8xl font-black mb-6">
        NIVEL
        <span
          class="text-transparent bg-clip-text bg-linear-to-r from-purple-400 to-pink-400"
        >
          {level}
        </span>
      </h1>
      <p class="text-3xl font-light text-gray-300">
        {ejerciciosDelNivel.length} ejercicios listos para ti
      </p>
    </header>
    <main class="max-w-4xl mx-auto px-6 pb-20">
      <div class="space-y-8">
        {
          ejerciciosDelNivel.map((ej) => (
            <div class="group bg-linear-to-r from-gray-900 via-gray-950 to-black border border-gray-800 rounded-3xl p-10 hover:border-purple-600 hover:shadow-2xl hover:shadow-purple-600/20 transition-all duration-500">
              <div class="flex items-start justify-between mb-6">
                <h2 class="text-4xl font-black text-transparent bg-clip-text bg-linear-to-r from-purple-400 to-pink-400">
                  #{ej.id.toString().padStart(2, "0")}
                </h2>
                <span
                  class={`px-6 py-3 rounded-full text-lg font-bold uppercase tracking-wider ${ej.dificultad === "fácil" ? "bg-green-900/60 text-green-300" : ej.dificultad === "medio" ? "bg-purple-900/60 text-purple-300" : "bg-rose-900/60 text-rose-300"}`}
                >
                  {ej.dificultad}
                </span>
              </div>
              <h3 class="text-3xl font-bold mb-8 text-gray-100 group-hover:text-white transition">
                {ej.titulo}
              </h3>
              <div class="space-y-3">
                <div class="flex justify-between text-gray-400">
                  <span>Tasa de éxito</span>
                  <span class="text-2xl font-black text-purple-400">
                    {ej.tasaExito}%
                  </span>
                </div>
                <div class="w-full bg-gray-800 rounded-full h-5 overflow-hidden">
                  <div
                    class="h-full bg-linear-to-r from-purple-600 to-pink-600 rounded-full transition-all duration-1000 ease-out"
                    style={`width: ${ej.tasaExito}%`}
                  />
                </div>
              </div>
              <div>
                <CodeDisplay client:visible codigo={ej.codigo} descripcion={ej.descripcion} />
              </div>
            </div>
          ))
        }
      </div>
      <div class="text-center mt-20">
        <a
          href="/"
          class="inline-block px-12 py-6 bg-gray-900 hover:bg-gray-800 rounded-2xl text-xl font-bold border border-gray-700 hover:border-purple-600 transition-all hover:scale-105"
        >
          ← Volver al inicio
        </a>
      </div>
    </main>
  </div>
</Layout>
